#:schema node_modules/wrangler/config-schema.json
name = "dundun-sentinel"
main = "src/index.js"
compatibility_date = "2024-12-08"
compatibility_flags = [ "nodejs_compat" ]

# Workers Assets - 静态资源配置
[assets]
directory = "./frontend/dist"
binding = "ASSETS"
# SPA 模式：所有非匹配路由返回 index.html
html_handling = "auto-trailing-slash"
not_found_handling = "single-page-application"

# D1 数据库绑定（主要数据存储）
# 注意：需要先创建 D1 数据库：npx wrangler d1 create dundun-sentinel-db
[[d1_databases]]
binding = "DB"
database_name = "dundun-sentinel-db"
database_id = "YOUR_D1_DATABASE_ID"

# 定时任务
[triggers]
crons = ["* * * * *", "0 4 * * *"]

# 本地开发配置
[vars]
ENVIRONMENT = "development"
